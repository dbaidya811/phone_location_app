{% extends "base.html" %}
{% block content %}
<h4 class="mb-3">IP Finder (Short Link)</h4>
<p class="text-muted">Create a short link that records visitor IP and approximate city/area before redirecting.</p>

<form method="POST" action="{{ url_for('ip_finder') }}" class="mb-4">
  <div class="input-group">
    <span class="input-group-text">URL</span>
    <input type="text" name="target_url" class="form-control" placeholder="https://example.com" value="{{ target_url if target_url else '' }}" required />
    <button type="submit" class="btn btn-primary">Generate Link</button>
  </div>
  <div class="form-text">Visitors will be redirected to this URL after capture.</div>
</form>

{% if share_link %}
<div class="card mb-3">
  <div class="card-header bg-success text-white">Share This Link</div>
  <div class="card-body">
    <div class="input-group mb-2">
      <input type="text" id="shareLink" class="form-control" value="{{ share_link }}" readonly>
      <button class="btn btn-outline-secondary" type="button" onclick="navigator.clipboard.writeText(document.getElementById('shareLink').value)">Copy</button>
      <a class="btn btn-success" href="{{ share_link }}" target="_blank">Open</a>
    </div>
    <div>
      <a class="btn btn-outline-primary" href="{{ view_link }}" target="_blank">View Captures</a>
    </div>
  </div>
</div>
{% endif %}

<p class="small text-muted">Note: Location is approximate and based on IP geolocation.</p>
{% endblock %}
